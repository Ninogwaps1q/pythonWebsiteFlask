{% extends "base.html" %}

{% block content %}
<div class="product-detail-card">
    <div class="product-image">
        <img src="{{ url_for('static', filename='uploads/' + (product.image or 'default.jpg')) }}" 
             alt="{{ product.product_name }}">
    </div>

    <div class="product-info">
        <h2 class="product-title">{{ product.product_name }}</h2>
        <p class="price">â‚±{{ '%.2f' | format(product.price) }}</p>
        <p><strong>Description:</strong> {{ product.description or 'No description provided.' }}</p>
        <p><strong>Stock:</strong> {{ product.stock }}</p>

        {% if g.user and not g.is_admin %}
            {% if product.stock > 0 %}
            <div class="action-section">
                <div class="quantity-container">
                    <label for="quantity">Quantity:</label>
                    <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ product.stock }}">
                </div>

                <div class="buttons-container">
                    <form method="POST" action="{{ url_for('add_to_cart', product_id=product.product_id) }}">
                        <button type="submit" class="btn-cart">
                            ðŸ›’ Add to Cart
                        </button>
                    </form>

                    <a href="{{ url_for('buy_now_page', product_id=product.product_id) }}" class="buy-btn">ðŸ’³ Buy Now</a>
                </div>
            </div>
            {% else %}
                <button class="btn-disabled" disabled>Out of Stock</button>
            {% endif %}
        {% elif not g.user %}
            <p style="margin-top: 10px;">
                <a href="{{ url_for('login') }}" class="btn-login">Log in to purchase</a>
            </p>
        {% endif %}

        <p><a href="{{ url_for('index') }}" class="back-link">&larr; Back to Shopping</a></p>
    </div>
</div>
{% endblock %}
